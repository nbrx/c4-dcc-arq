@startuml
set separator none
title Software Difusión de Contenidos - Containers

top to bottom direction

!include <C4/C4>
!include <C4/C4_Context>
!include <C4/C4_Container>

skinparam svgDimensionStyle false
skinparam preserveAspectRatio meet
System(UNoticias, "U-Noticias", "Sistema de publicación noticias", $tags="")[[../../u-noticias/context/]]
System(UCampus, "U-Campus", "Sistema gestión docente", $tags="")[[../../u-campus/context/]]
Person(Usuario, "Usuario", "Comunidad DCC, Universitaria y publico en general", $tags="")
Person(ÁreadeDifusión, "Área de Difusión", "Área encargada de crear distintos contenidos para el departamento", $tags="")
Person(ÁreadeSistemas, "Área de Sistemas", "", $tags="")
Person(Docentes, "Docentes", "", $tags="")
System(cuentasuchile, "cuentas u-chile", "Sistema que administra la identida, autorización y autenticación de las cuentas de usuario de la Uniersidad de Chile", $tags="")[[../../cuentas-u-chile/context/]]
System(uproyectos, "u-proyectos", "Sistema que administra los proyectos de la Uniersidad de Chile", $tags="")[[../../u-proyectos/context/]]
System(UPaper, "U-Paper", "Sistema gestión documentos de investigación científica", $tags="")[[../../u-paper/context/]]

System_Boundary("SoftwareDifusióndeContenidos_boundary", "Software Difusión de Contenidos", $tags="") {
  Container(SoftwareDifusióndeContenidos.Gateway, "Gateway", "", $tags="")[[../component/]]
  ContainerDb(SoftwareDifusióndeContenidos.DBMSDifusióndeContenidos, "DBMS Difusión de Contenidos", "", $tags="")
  ContainerQueue(SoftwareDifusióndeContenidos.Messagepubsub, "Message pubsub", "NAT JetStream", "Cola de mensajeria del software de difusión de contenido", $tags="")[[../component/]]
  Container(SoftwareDifusióndeContenidos.CDNcontenidoestático, "CDN contenido estático", "cdn", $tags="")
  Container(SoftwareDifusióndeContenidos.SitioWebPublico, "Sitio Web Publico", "nextjs", "", $tags="")[[../component/]]
  Container(SoftwareDifusióndeContenidos.Backend, "Backend", "Software Difusión de Contenido", $tags="")
}

Rel_D(ÁreadeDifusión, UNoticias, "administra notificas", $tags="")
Rel_D(Usuario, SoftwareDifusióndeContenidos.SitioWebPublico, "Consume Contenido", $tags="")
Rel_D(Usuario, SoftwareDifusióndeContenidos.SitioWebPublico, "Comenta Post", $tags="")
Rel_D(Docentes, SoftwareDifusióndeContenidos.SitioWebPublico, "Escribe un blog", $tags="")
Rel_D(ÁreadeDifusión, SoftwareDifusióndeContenidos.SitioWebPublico, "Publica y Gestiona Contenido de Difusión", $tags="")
Rel_D(ÁreadeSistemas, SoftwareDifusióndeContenidos.SitioWebPublico, "Administra y opera la infraestructura", $tags="")
Rel_D(SoftwareDifusióndeContenidos.SitioWebPublico, SoftwareDifusióndeContenidos.Gateway, "Consume Servicio API SDC", "broker", $tags="")
Rel_D(SoftwareDifusióndeContenidos.Gateway, SoftwareDifusióndeContenidos.Backend, "Consume Servicio Backend SDC", "service", $tags="")
Rel_D(SoftwareDifusióndeContenidos.Backend, SoftwareDifusióndeContenidos.DBMSDifusióndeContenidos, "Lee y escribe esquma SDC", "repository", $tags="")
Rel_D(SoftwareDifusióndeContenidos.SitioWebPublico, SoftwareDifusióndeContenidos.CDNcontenidoestático, "referencia recursos estaticos", "https", $tags="")
Rel_D(SoftwareDifusióndeContenidos.Gateway, UNoticias, "Consume Servicio Backend U-Noticias", "service", $tags="")
Rel_D(SoftwareDifusióndeContenidos.Gateway, UCampus, "Consume Servicio Backend U-Campus", "service", $tags="")
Rel_D(SoftwareDifusióndeContenidos.SitioWebPublico, cuentasuchile, "verifica autenticación/autorización", "OIDC", $tags="")
Rel_D(uproyectos, SoftwareDifusióndeContenidos.Messagepubsub, "replica proyectos de investigación", "pubsub", $tags="")
Rel_D(SoftwareDifusióndeContenidos.Messagepubsub, SoftwareDifusióndeContenidos.DBMSDifusióndeContenidos, "recibe replica u-proyectos", "pubsub", $tags="")
Rel_D(UPaper, SoftwareDifusióndeContenidos.Messagepubsub, "replica publicaciones cientificas", "pubsub", $tags="")

SHOW_LEGEND(true)
@enduml